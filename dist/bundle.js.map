{"version":3,"sources":["webpack:///webpack/bootstrap fdcdc1510d94602e41b1","webpack:///./ts/main.ts","webpack:///./ts/Raytracer.ts","webpack:///./ts/Vector.ts","webpack:///./ts/Camera.ts","webpack:///./ts/Shaders.ts"],"names":[],"mappings":"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","file":"./dist/bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap fdcdc1510d94602e41b1\n **/","/*\r\n\r\nWebGL TypeScript Raytracer\r\n--------------------------\r\nAuthor: Dylan Cutler\r\n--------------------\r\n\r\nMain program\r\n\r\n*/\r\n\r\nimport Raytracer from \"./Raytracer\";\r\n\r\nfunction main(): void {\r\n  let canvas: HTMLCanvasElement;\r\n  let raytracer: Raytracer;\r\n\r\n  canvas = document.createElement(\"canvas\");\r\n  canvas.width = 700;\r\n  canvas.height = 500;\r\n  document.getElementById('container').appendChild(canvas);\r\n\r\n  raytracer = new Raytracer(canvas);\r\n  raytracer.setLookAt(0, 0, 10, 0, 0, 0);\r\n  setTimeout(() => { raytracer.render(); }, 100);\r\n}\r\nwindow.onload = (event: Event): void => main();\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./ts/main.ts\n **/","/*\r\n\r\nWebGL Raytracer\r\n---------------\r\n\r\nScene object:\r\n- Initializes instance of WebGL\r\n- Calls functions for WebGL to render\r\n\r\n*/\r\n\r\nimport Vector from \"./Vector\";\r\nimport Camera from \"./Camera\";\r\nimport initShaders from \"./Shaders\";\r\n\r\nexport default class Raytracer {\r\n\r\n  public ASPECT_RATIO: number;\r\n\r\n  private gl: WebGLRenderingContext;\r\n  private shaderProgram: WebGLProgram;\r\n  private camera: Camera;\r\n\r\n  /*\r\n  * @class Raytracer\r\n  * @constructor\r\n  */\r\n  constructor(canvas: HTMLCanvasElement) {\r\n    this.ASPECT_RATIO = canvas.width / canvas.height;\r\n    // Initialzing WebGL\r\n    this.gl = <WebGLRenderingContext>\r\n      canvas.getContext('webgl') || canvas.getContext('experimental-webgl');\r\n    this.gl.viewport(0, 0, canvas.width, canvas.height);\r\n    this.gl.clearColor(0, 0, 0, 1);\r\n    this.gl.clearDepth(1);\r\n    // Initializing shaders\r\n    this.shaderProgram = initShaders(this.gl);\r\n    if( this.shaderProgram === null ) {\r\n      throw new Error(\"Could not compile shaders. See error message for details.\");\r\n    }\r\n    // Initializing buffers\r\n    this.initBuffers();\r\n    // Setting camera to null\r\n    this.camera = null;\r\n  }\r\n\r\n  /*\r\n  * This method initializes the vertex buffers, input is aspect ratio\r\n  *\r\n  * @class Raytracer\r\n  * @method initBuffers\r\n  */\r\n  private initBuffers(): void {\r\n    let aWindowPosition: number;\r\n    let aPosition: number;\r\n    let vertices: number[];\r\n    let windowBuffer: WebGLBuffer;\r\n    let positionBuffer: WebGLBuffer;\r\n\r\n    // Buffer for the vertices of the window\r\n    aWindowPosition = this.gl.getAttribLocation(this.shaderProgram, 'aWindowPosition');\r\n    this.gl.enableVertexAttribArray(aWindowPosition);\r\n\r\n    aPosition = this.gl.getAttribLocation(this.shaderProgram, 'aPosition');\r\n    this.gl.enableVertexAttribArray(aPosition);\r\n\r\n    vertices = [\r\n      -1., 1.,\r\n      -1., -1.,\r\n      1., 1.,\r\n      1., -1.\r\n    ];\r\n\r\n    windowBuffer = this.gl.createBuffer();\r\n    this.gl.bindBuffer(this.gl.ARRAY_BUFFER, windowBuffer);\r\n    this.gl.bufferData(this.gl.ARRAY_BUFFER, new Float32Array(vertices), this.gl.STATIC_DRAW);\r\n    this.gl.bindBuffer(this.gl.ARRAY_BUFFER, windowBuffer);\r\n    this.gl.vertexAttribPointer(aWindowPosition, 2, this.gl.FLOAT, false, 0, 0);\r\n\r\n    positionBuffer = this.gl.createBuffer();\r\n    this.gl.bindBuffer(this.gl.ARRAY_BUFFER, positionBuffer);\r\n    this.gl.vertexAttribPointer(aPosition, 3, this.gl.FLOAT, false, 0, 0);\r\n  }\r\n\r\n  /*\r\n  * This method sets position and lookAt vectors of the camera\r\n  *\r\n  * @class Raycaster\r\n  * @method setLookAt\r\n  */\r\n  public setLookAt( eyeX: number, eyeY: number, eyeZ: number,\r\n                     atX: number,  atY: number,  atZ: number ): void\r\n  {\r\n    this.camera = new Camera(new Vector(eyeX, eyeY, eyeZ),\r\n                             new Vector( atX,  atY,  atZ));\r\n  }\r\n\r\n  /*\r\n  * This method renders the scene in WebGL\r\n  *\r\n  * @class Raycaster\r\n  * @method render\r\n  */\r\n  public render(): void {\r\n    const AspRat: number = this.ASPECT_RATIO;\r\n    let cameraPosition: WebGLUniformLocation;\r\n    let cameraTopLeft: Vector;\r\n    let cameraBottomLeft: Vector;\r\n    let cameraTopRight: Vector;\r\n    let cameraBottomRight: Vector;\r\n    let corners: number[] = [];\r\n    let aPosition: number;\r\n\r\n    // Clear last rendered frame\r\n    this.gl.clear(this.gl.COLOR_BUFFER_BIT | this.gl.DEPTH_BUFFER_BIT);\r\n\r\n    // Passing camera position to the shader\r\n    cameraPosition = this.gl.getUniformLocation(this.shaderProgram, 'cameraPos');\r\n    this.gl.uniform3fv(cameraPosition, new Float32Array(Vector.push(this.camera.pos, [])));\r\n\r\n    // Get camera corners\r\n    cameraTopLeft = Vector.add(\r\n      this.camera.forward,\r\n      Vector.subtract(this.camera.up, Vector.scale(AspRat, this.camera.right))\r\n    );\r\n    cameraBottomLeft = Vector.subtract(\r\n      this.camera.forward,\r\n      Vector.add(this.camera.up, Vector.scale(AspRat, this.camera.right))\r\n    );\r\n    cameraTopRight = Vector.add(\r\n      this.camera.forward,\r\n      Vector.add(this.camera.up, Vector.scale(AspRat, this.camera.right))\r\n    );\r\n    cameraBottomRight = Vector.add(\r\n      this.camera.forward,\r\n      Vector.subtract(Vector.scale(AspRat, this.camera.right), this.camera.up)\r\n    );\r\n    Vector.push(cameraTopLeft, corners);\r\n    Vector.push(cameraBottomLeft, corners);\r\n    Vector.push(cameraTopRight, corners);\r\n    Vector.push(cameraBottomRight, corners);\r\n\r\n    // Passing corners to the shader\r\n    this.gl.bufferData(this.gl.ARRAY_BUFFER, new Float32Array(corners), this.gl.STATIC_DRAW);\r\n\r\n    // Draw new frame\r\n    this.gl.drawArrays(this.gl.TRIANGLE_STRIP, 0, 4);\r\n  }\r\n}\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./ts/Raytracer.ts\n **/","/*\r\n\r\nWebGL Raytracer\r\n---------------\r\n\r\nVector object\r\n- vector operations\r\n- push components to an array\r\n\r\n*/\r\n\r\nexport default class Vector {\r\n  constructor(public x: number,\r\n              public y: number,\r\n              public z: number) {}\r\n\r\n  static scale(k: number, v: Vector): Vector {\r\n    return new Vector(k*v.x, k*v.y, k*v.z)\r\n  }\r\n  static add(v1: Vector, v2: Vector): Vector {\r\n    return new Vector(v1.x+v2.x, v1.y+v2.y, v1.z+v2.z);\r\n  }\r\n  static subtract(v1: Vector, v2: Vector): Vector {\r\n    return new Vector(v1.x-v2.x, v1.y-v2.y, v1.z-v2.z);\r\n  }\r\n  static mag(v: Vector): number {\r\n    return Math.sqrt(v.x*v.x + v.y*v.y + v.z*v.z);\r\n  }\r\n  static normalize(v: Vector): Vector {\r\n    let mag: number;\r\n    let div: number;\r\n    mag = Vector.mag(v);\r\n    if(mag === 0) {\r\n      console.log('Cannot normalize zero vector');\r\n      return null;\r\n    }\r\n    div = 1/mag;\r\n    return Vector.scale(div, v);\r\n  }\r\n  static cross(v1: Vector, v2: Vector): Vector {\r\n    return new Vector(v1.y * v2.z - v1.z * v2.y,\r\n                      v1.z * v2.x - v1.x * v2.z,\r\n                      v1.x * v2.y - v1.y * v2.x);\r\n  }\r\n  static push(v: Vector, array: number[]): number[] {\r\n    array.push(v.x, v.y, v.z);\r\n    return array;\r\n  }\r\n}\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./ts/Vector.ts\n **/","/*\r\n\r\nWebGL Raytracer\r\n---------------\r\n\r\nCamera object:\r\n- has public vector classes for raytracer\r\n\r\n*/\r\n\r\nimport Vector from \"./Vector\";\r\n\r\nexport default class Camera {\r\n  public forward: Vector;\r\n  public right: Vector;\r\n  public up: Vector;\r\n\r\n  constructor(public pos: Vector, lookAt: Vector) {\r\n    let down: Vector;\r\n    down = new Vector(0, -1, 0);\r\n    this.forward = Vector.normalize(Vector.subtract(lookAt, this.pos));\r\n    this.right = Vector.normalize(Vector.cross(down, this.forward));\r\n    this.up = Vector.normalize(Vector.cross(this.right, this.forward));\r\n  }\r\n}\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./ts/Camera.ts\n **/","/*\r\n\r\nWebGL Raytracer\r\n---------------\r\n\r\nShaders module:\r\n- contains source for vertex and fragment shaders\r\n- contains function to get shader program from source\r\n\r\n*/\r\n\r\n/****************************************************/\r\n\r\n/*\r\n* SHADER SOURCE CODE\r\n*/\r\n\r\nlet VERTEX_SHADER: string;\r\nlet FRAGMENT_SHADER: string;\r\n\r\n/* VERTEX SHADER */\r\n\r\nVERTEX_SHADER = `\r\n  precision mediump float;\r\n\r\n  attribute vec2 aWindowPosition;\r\n  attribute vec3 aPosition;\r\n\r\n  varying vec3 vPosition;\r\n\r\n  void main() {\r\n    gl_Position = vec4(aWindowPosition, 1., 1.);\r\n    vPosition = aPosition;\r\n  }\r\n`;\r\n\r\n/* FRAGMENT SHADER */\r\n\r\nFRAGMENT_SHADER = `\r\n  precision mediump float;\r\n\r\n  varying vec3 vPosition;\r\n\r\n  uniform vec3 cameraPos;\r\n\r\n  /**\r\n  * Intersection test for spheres\r\n  */\r\n  float intersectSphere(vec3 rayStart, vec3 rayDir, vec3 center, float r) {\r\n    vec3 at;\r\n    float v;\r\n    float dist;\r\n    float disc;\r\n\r\n    at = center - rayStart;\r\n    v = dot(at, rayDir);\r\n    dist = -1.;\r\n    if( v >= 0. ) {\r\n      disc = r * r - ( dot(at, at) - v * v );\r\n      if( disc > 0. ) dist = v - sqrt(disc);\r\n    }\r\n    return dist;\r\n  }\r\n\r\n  /**\r\n  * Color sphere\r\n  */\r\n  vec3 colorSphere(vec3 pos, vec3 viewDir, vec3 diffColor, vec3 specColor) {\r\n    vec3 lightPos = vec3(-1., 2., 2.);\r\n    vec3 lightColor = vec3(1.);\r\n\r\n    vec3 lightDir;\r\n    float distance;\r\n    float lambertian;\r\n    vec3 H;\r\n    float specular;\r\n\r\n    lightDir = normalize(lightPos - pos);\r\n    distance = length(lightPos - pos);\r\n\r\n    lambertian = clamp( dot(normalize(pos), lightDir), 0.2, 1. );\r\n\r\n    H = normalize(lightDir + viewDir);\r\n    specular = clamp( pow(dot(normalize(pos), H), 250.), 0.01, 1.) / distance;\r\n\r\n    return (lambertian * diffColor + specular * specColor) * lightColor;\r\n  }\r\n\r\n\r\n  /**\r\n  * main function\r\n  */\r\n  void main() {\r\n    vec3 cameraDir;\r\n    float dist;\r\n    vec3 color;\r\n\r\n    cameraDir = normalize(vPosition - cameraPos);\r\n    dist = intersectSphere(cameraPos, cameraDir, vec3(0.), 0.5);\r\n\r\n    if( dist > 0. ) {\r\n      vec3 pos = cameraPos + dist * cameraDir;\r\n      color = colorSphere( pos, -1.*cameraDir, vec3(0.1, 0.5, 1.), vec3(0.9) );\r\n      gl_FragColor = vec4(color, 1.);\r\n    }\r\n    else {\r\n      gl_FragColor = vec4(0., 0., 0., 1.);\r\n    }\r\n  }\r\n`;\r\n\r\n/****************************************************/\r\n\r\n/*\r\n* This function loads the shader from the source code\r\n*/\r\nfunction getShader( gl: WebGLRenderingContext,\r\n                    source: string,\r\n                    vertexOrFragment: boolean ): WebGLShader\r\n{\r\n  let shader: WebGLShader;\r\n\r\n  shader = vertexOrFragment?\r\n    gl.createShader(gl.VERTEX_SHADER) : gl.createShader(gl.FRAGMENT_SHADER);\r\n\r\n  gl.shaderSource(shader, source);\r\n  gl.compileShader(shader);\r\n  if(!gl.getShaderParameter(shader, gl.COMPILE_STATUS)) {\r\n    console.error('Shader failed to compile: '+ gl.getShaderInfoLog(shader));\r\n    return null;\r\n  }\r\n\r\n  return shader;\r\n}\r\n\r\n/****************************************************/\r\n\r\n/*\r\n* Shader module contains shader source and methods to compile/attach shaders\r\n*\r\n* @function initShaders\r\n*/\r\nfunction initShaders(gl: WebGLRenderingContext): WebGLProgram {\r\n  let vertexShader: WebGLShader;\r\n  let fragmentShader: WebGLShader;\r\n  let shaderProgram: WebGLProgram;\r\n\r\n  vertexShader = getShader(gl, VERTEX_SHADER, true);\r\n  fragmentShader = getShader(gl, FRAGMENT_SHADER, false);\r\n  if(vertexShader === null || fragmentShader === null) {\r\n    console.log(\"Shader failed to compile. See error message for details.\");\r\n    return null;\r\n  }\r\n\r\n  shaderProgram = gl.createProgram();\r\n  gl.attachShader(shaderProgram, vertexShader);\r\n  gl.attachShader(shaderProgram, fragmentShader);\r\n  gl.linkProgram(shaderProgram);\r\n  if( !gl.getProgramParameter(shaderProgram, gl.LINK_STATUS) ) {\r\n    console.error(\"Could not initialize shader program.\");\r\n    return null;\r\n  }\r\n  gl.useProgram(shaderProgram);\r\n\r\n  return shaderProgram;\r\n}\r\n\r\n/************************************************************************/\r\n\r\n// Export initShaders from this program\r\n\r\nexport default initShaders;\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./ts/Shaders.ts\n **/"],"sourceRoot":""}